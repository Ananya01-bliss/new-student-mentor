<div class="dashboard-container">
    <aside class="sidebar">
        <div class="logo">
            <h2>Project Pilot</h2>
            <span class="badge">Mentor</span>
        </div>

        <nav>
            <a routerLink="/mentor/dashboard" class="nav-item active">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a routerLink="/mentor/mentees" class="nav-item">
                <i class="fas fa-users"></i> My Mentees
            </a>
            <a routerLink="/mentor/requests" class="nav-item">
                <i class="fas fa-envelope-open-text"></i> Requests
                <span class="notification-dot"></span>
            </a>
            <a routerLink="/chat" class="nav-item">
                <i class="fas fa-comments"></i> Chat
            </a>
            <a routerLink="/notifications" class="nav-item">
                <i class="fas fa-bell"></i> Notifications
            </a>
            <a routerLink="/" class="nav-item logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </nav>
    </aside>

    <main class="main-content">
        <header>
            <h1>Welcome back, {{ userName }}!</h1>
            <div class="user-profile">
                <span>MJ</span>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Active Mentees</h3>
                    <p class="stat-value">{{ menteeCount }} / {{ maxStudents }}</p>
                    <p class="stat-meta">Intake progress</p>
                    <div class="limit-warning" *ngIf="menteeCount >= maxStudents">
                        <i class="fas fa-exclamation-triangle"></i> Intake full
                    </div>
                </div>
                <div class="stat-card">
                    <h3>Pending Requests</h3>
                    <p class="stat-value highlight">{{ pendingRequests }}</p>
                    <p class="stat-meta">New project proposals</p>
                </div>
                <div class="stat-card">
                    <h3>Completed Projects</h3>
                    <p class="stat-value">{{ completedProjects }}</p>
                    <p class="stat-meta">Lifetime interactions</p>
                </div>
            </div>

            <div class="section">
                <h2>Mentorship Requests</h2>

                <div class="alert alert-error" *ngIf="errorMessage">
                    <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
                </div>

                <div class="requests-list" *ngIf="requests && requests.length > 0; else noRequests">
                    <div class="request-card" *ngFor="let req of requests">
                        <div class="request-info">
                            <h3>{{ req.studentName }}</h3>
                            <p>{{ req.title }}</p>
                            <p class="request-msg">"{{ req.idea | slice:0:150 }}{{ req.idea.length > 150 ? '...' : ''
                                }}"
                            </p>
                        </div>
                        <div class="request-actions">
                            <button class="btn-sm btn-accept" (click)="respondToRequest(req._id, 'approved')"
                                [disabled]="menteeCount >= maxStudents"
                                [title]="menteeCount >= maxStudents ? 'Intake limit reached' : 'Accept Request'">
                                Accept
                            </button>
                            <button class="btn-sm btn-decline" (click)="respondToRequest(req._id, 'rejected')">
                                Decline
                            </button>
                        </div>
                    </div>
                </div>
                <ng-template #noRequests>
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <p>No pending mentorship requests at the moment.</p>
                    </div>
                </ng-template>
            </div>
        </div>
    </main>
</div>