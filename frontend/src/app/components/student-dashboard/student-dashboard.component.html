<div class="dashboard-container">
    <aside class="sidebar">
        <div class="logo">
            <h2>Project Pilot</h2>
            <span class="badge">Student</span>
        </div>

        <nav>
            <a routerLink="/student/dashboard" class="nav-item active">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a routerLink="/student/projects" class="nav-item">
                <i class="fas fa-project-diagram"></i> New Project
            </a>
            <a routerLink="/student/all-projects" class="nav-item">
                <i class="fas fa-layer-group"></i> All Projects
            </a>
            <a routerLink="/student/find-mentor" class="nav-item">
                <i class="fas fa-search"></i> Find Mentor
            </a>
            <a routerLink="/chat" class="nav-item">
                <i class="fas fa-comments"></i> Chat
            </a>
            <a routerLink="/notifications" class="nav-item">
                <i class="fas fa-bell"></i> Notifications
            </a>
            <a routerLink="/" class="nav-item logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </nav>


    </aside>

    <main class="main-content">
        <header>
            <h1>Welcome back, {{ userName }}!</h1>
            <div class="user-profile">
                <span>SD</span>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="rejection-alert" *ngIf="project?.status === 'rejected'">
                <i class="fas fa-exclamation-circle"></i>
                <div class="alert-content">
                    <p>Mentor <strong>{{ project.mentor?.name }}</strong> has declined your request for "{{
                        project.title }}".</p>
                </div>
                <div class="alert-actions">
                    <a [routerLink]="['/student/find-mentor']"
                        [queryParams]="{ mentorId: project.mentor?._id, autoOpen: 'true' }"
                        class="btn-link secondary">Try Again</a>
                    <a [routerLink]="['/student/find-mentor']" class="btn-link">Find New Mentor</a>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card project-progress" *ngIf="project">
                    <div class="stat-header">
                        <h3>Project Progress</h3>
                        <span class="progress-val">{{ project.progress }}%</span>
                    </div>
                    <app-progress-bar [progress]="project.progress" height="8px" [showLabel]="false"></app-progress-bar>
                    <p class="stat-meta">{{ project.title }}</p>
                </div>
                <div class="stat-card">
                    <h3>Milestones</h3>
                    <p class="stat-value">{{ completedMilestones }}/{{ totalMilestones }}</p>
                    <p class="stat-meta">Completed</p>
                </div>
                <div class="stat-card">
                    <h3>Messages</h3>
                    <p class="stat-value">0</p>
                    <p class="stat-meta">New Notifications</p>
                </div>
            </div>

            <div class="section" *ngIf="suggestedMentors && suggestedMentors.length > 0">
                <h2>Suggested Mentors</h2>
                <div class="mentors-grid">
                    <div class="mentor-card" *ngFor="let mentor of suggestedMentors">
                        <div class="mentor-avatar">
                            <img [src]="'https://ui-avatars.com/api/?name=' + mentor.name" alt="Avatar">
                        </div>
                        <h3>{{ mentor.name }}</h3>
                        <p>{{ mentor.shortDescription || (mentor.expertise && mentor.expertise[0]) || 'Expert Mentor' }}
                        </p>
                        <button class="btn-sm" [routerLink]="['/student/find-mentor']"
                            [queryParams]="{ mentorId: mentor._id, autoOpen: 'true' }">
                            Connect
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>